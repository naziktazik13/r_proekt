{% extends 'base.html' %}

{% block content %}
<div class="container mt-3">
    <h2>Posts</h2>
    {% for post in posts %}
    <div class="post-item">
        <h3><a href="{% url 'post_detail' post.pk %}">{{ post.title }}</a></h3>
        {% if post.media %}
        <img src="{{ post.media.url }}" alt="Изображение поста" style="max-width: 150px;">
        {% endif %}
        {% if post.video %}
        <video controls style="max-width: 10%;">
            <source src="{{ post.video.url }}" type="video/mp4">
            Ваш браузер не поддерживает видео.
        </video>
        {% endif %}
        <p>{{ post.content|truncatewords:30 }}</p>
        {% if post.status == 'draft' %}
        <p><em>(Черновик)</em></p>
        {% endif %}
    </div>
    {% endfor %}
</div>
{% endblock %}
